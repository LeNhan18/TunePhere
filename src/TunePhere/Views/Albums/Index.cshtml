@model IEnumerable<TunePhere.Models.Album>
@{
    ViewData["Title"] = $"Album của {ViewBag.Artist.ArtistName}";
}
<link rel="stylesheet" href="~/css/albums.css"/>
<div class="container-fluid p-0">
    <!-- Header với ảnh nghệ sĩ -->
    <div class="artist-header position-relative" style="height: 400px;">
        <div class="position-absolute w-100 h-100" style="background: linear-gradient(rgba(0,0,0,0.4), rgba(13, 13, 13, 0.9)), url('@ViewBag.Artist.CoverImageUrl') no-repeat center center; background-size: cover; filter: brightness(1.2) contrast(1.1);">
        </div>
        <div class="position-absolute bottom-0 text-white p-5">
            <span class="artist-label mb-2">ALBUM</span>
            <h1 class="display-4 fw-bold text-shadow text-glow">@ViewBag.Artist.ArtistName</h1>
            <p class="lead opacity-90">@Model.Count() album</p>
        </div>
    </div>

    <div class="container mt-5">
        <!-- Back button và Create button -->
        <div class="d-flex justify-content-between align-items-center mb-4">
            <a href="@Url.Action("Profile", "Artists", new { id = ViewBag.Artist.ArtistId })" class="btn-back">
                <i class="fas fa-arrow-left me-2"></i>Quay lại trang nghệ sĩ
            </a>
            @if (User.Identity.IsAuthenticated && User.IsInRole("Artist") && ViewBag.IsOwner)
            {
                <a href="@Url.Action("Create", "Albums")" class="btn-create">
                    <i class="fas fa-plus-circle me-2"></i>Tạo album mới
                </a>
            }
        </div>

        <!-- Albums Grid -->
        <div class="albums-container">
            <div class="albums-grid">
                @foreach (var album in Model)
                {
                    <div class="album-card">
                        <div class="album-image-container">
                            <img src="@(string.IsNullOrEmpty(album.ImageUrl) ? "/images/default-album.jpg" : album.ImageUrl)" alt="@album.AlbumName" />
                            <div class="album-overlay">
                                <a href="@Url.Action("Details", new { id = album.AlbumId })" class="play-btn">
                                    <i class="fas fa-play"></i>
                                </a>
                            </div>
                        </div>
                        <div class="album-info">
                            <h3 class="album-title">@album.AlbumName</h3>
                            <div class="album-meta">
                                <span><i class="fas fa-music"></i> @album.numberSongs bài hát</span>
                                <span><i class="fas fa-clock"></i> @album.Time.ToString(@"mm\:ss")</span>
                            </div>
                            <p class="album-date">
                                @(DateTime.TryParse(album.ReleaseDate, out DateTime date) ? date.ToString("dd/MM/yyyy") : "")
                            </p>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
</div>
